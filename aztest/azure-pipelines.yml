pr:
  branches:
    include:
    - aztest

pool:
  vmImage: 'VS2017-Win2016'

steps:
  - task: CmdLine@1
    inputs:
      filename: C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6.2 Tools\sn.exe
      arguments: -Vr *,31bf3856ad364e35
  - task: MSBuild@1
    inputs:
      solution: build.proj
  - task: MSBuild@1
    inputs:
      solution: build.proj
      msbuildArguments: /t:RunTests /p:Scope=Compute
  - task: PublishBuildArtifacts@1
    inputs:
      pathtoPublish: TestResults
      artifactName: TestResults